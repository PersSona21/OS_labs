# Лабораторная работа №4

### Цель работы

Целью является приобретение практических навыков в:
- Создание динамических библиотек
- Создание программ, которые используют функции динамических библиотек

## Задание


Требуется создать динамические библиотеки, которые реализуют
заданный вариантом функционал. Далее использовать данные
библиотеки 2-мя способами:
1. Во время компиляции (на этапе линковки/linking)
2. Во время исполнения программы. Библиотеки загружаются в память с помощью интерфейса ОС для работы с динамическими библиотеками


В конечном итоге, в лабораторной работе необходимо получить
следующие части:

- Динамические библиотеки, реализующие контракты, которые заданы вариантом;
- Тестовая программа (программа №1), которая используют одну из библиотек, используя информацию полученные на этапе компиляции;

- Тестовая программа (программа №2), которая загружает библиотеки, используя только их относительные пути и контракты.


Провести анализ двух типов использования библиотек.


Пользовательский ввод для обоих программ должен быть организован
следующим образом:

- Если пользователь вводит команду «0», то программа переключает одну
реализацию контрактов на другую (необходимо только для программы
№2). Можно реализовать лабораторную работу без данной функции, но
максимальная оценка в этом случае будет «хорошо»;
- "1 arg1 arg2 … argN”, где после “1” идут аргументы для первой функции,
предусмотренной контрактами. После ввода команды происходит вызов
первой функции, и на экране появляется результат ее выполнения;
- “2 arg1 arg2 … argM”, где после “2” идут аргументы для второй функции,
предусмотренной контрактами. После ввода команды происходит вызов
второй функции, и на экране появляется результат ее выполнения.

## Вариант задания

25 вариант: 
- Функция 1 - 4 вариант
- Функция 2 - 8 вариант

4 Вариант:

Подсчёт наибольшего общего делителя для двух натуральных
чисел:

Сигнатура функции: int gcd(int a, int b);

- Реализация №1: Алгоритм Евклида

- Реализация №2: Наивный алгоритм: пытаться разделить числа на
все числа, что меньше a и b.

8 Вариант:

Перевод числа x из десятичной системы счисления в другую:

Сигнатура функции: char *convert(int x);

- Реализация №1: Перевод в двоичную

- Реализация №2: Перевод в троичную


# Сборка программ с динамическими библиотеками
---

## Создание динамических библиотек

```bash
gcc -shared -fPIC -o libgcd1.so     libgcd1.c
gcc -shared -fPIC -o libgcd2.so     libgcd2.c
gcc -shared -fPIC -o libconvert1.so libconvert1.c
gcc -shared -fPIC -o libconvert2.so libconvert2.c
```

## Сборка программы со статической линковкой
```bash
# Вариант 1 — исходники библиотек
gcc -o test_static test_static.c libgcd1.c libconvert1.c

# Вариант 2 — собранные .so файлы
gcc -o test_static test_static.c -L. -lgcd1 -lconvert1
```
## Запуск программы
```bash
./test_static
```


## Сборка программы с динамической линковкой
```bash
# Подключаем динамический линковщик (-ldl)
gcc -o test_dynamic test_dynamic.c -ldl
```

## Запуск программы

```Bash
./test_dynamic
```
Программа ожидает, что библиотеки libgcd1.so, libgcd2.so, libconvert1.so, libconvert2.so находятся в текущей директории.